{% extends "dashboard/base.jinja" %}
{% block dashboard_content %}
    <h1 class="text-left text-4xl mt-5 text-[#ff6438]">Moderation</h1>
    {% if not is_admin %}
        <p class="text-red-600">You do not have permission to access this page.</p>
    {% else %}
        <div class="flex flex-wrap gap-4 justify-start">
            {% if users %}
                {% for user_item in users %}
                    <div class="flex-1 border border-gray-300 rounded-lg p-4 mb-4">
                        <h3 class="text-lg font-bold">{{ user_item.username }}</h3>
                        <p class="text-gray-700">Email: {{ user_item.email }}</p>
                        <p class="text-gray-700">
                            Admin:
                            {% if user_item.is_admin %}
                                Yes
                            {% else %}
                                No
                            {% endif %}
                        </p>
                        <form method="POST" action="/dashboard/moderation">
                            <input type="hidden" name="user_id" value="{{ user_item.user_id }}">
                            {% if user_item.is_admin %}
                                <button type="submit"
                                        name="action"
                                        value="demote"
                                        class="bg-red-500 text-white px-4 py-2 rounded-md cursor-pointer mt-4 hover:bg-red-600">
                                    Remove Admin Rights
                                </button>
                            {% else %}
                                <button type="submit"
                                        name="action"
                                        value="promote"
                                        class="bg-green-500 text-white px-4 py-2 rounded-md cursor-pointer mt-4 hover:bg-green-600">
                                    Make Admin
                                </button>
                            {% endif %}
                            <button type="submit"
                                    name="action"
                                    value="delete_user"
                                    onclick="return confirm('Are you sure you want to delete this user?')"
                                    class="bg-black text-white px-4 py-2 rounded-md cursor-pointer mt-4 ml-4 hover:bg-gray-800">
                                Delete User
                            </button>
                        </form>
                    </div>
                {% endfor %}
            {% else %}
                <p class="text-gray-600">No users found.</p>
            {% endif %}
        </div>
    {% endif %}
{% endblock %}
